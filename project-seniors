1.To find out the total number of channels selected and their total amount to the user.

select count(channel_id) total_number_of_channels,sum(price_amount) total_amount from user_subscribed_list
        where user_id = 101;

2.To find out the total number of channels selected for the given user.
```sql
CREATE OR REPLACE FUNCTION FU_TOTAL_CHANNEL 
(
  I_USER_ID IN NUMBER
) RETURN NUMBER AS
v_total_channels number;
BEGIN
select count(channel_id)as total_number_of_channels into v_total_channels from user_subscribed_list
          where user_id = i_user_id;
  RETURN v_total_channels;
END FU_TOTAL_CHANNEL;
select fu_total_channel () from dual;
```
3.To find out the total price amount for selected channels to the given user.
```sql
CREATE OR REPLACE FUNCTION FU_TOTAL_AMOUNT 
(
  I_USER_ID IN number 
) RETURN NUMBER AS
v_total_amount number:=0;
BEGIN
select sum(price_amount) total_amount into v_total_amount from user_subscribed_list
        where user_id = i_user_id;
  RETURN v_total_amount;
END FU_TOTAL_AMOUNT;
select fu_total_amount () from dual;
```
4. To find out the what are channels are selected to the given user.

select user_id,channel_name from user_subscribed_list where user_id=101;

create table special_packs
(
pack_id varchar2(10),
pack_name varchar2(100) not null,
number_of_channels number (10) not null,
price decimal (10,2) not null,
constraint pack_id_pk primary key (pack_id),
constraint pack_name_uq unique (pack_name)
);

insert into special_packs (pack_id,pack_name,number_of_channels,price)
values ('p2p3','south special pack',21,207.68);

insert into special_packs (pack_id,pack_name,number_of_channels,price)
values ('p2','tamil basic',11,112.10);

insert into special_packs (pack_id,pack_name,number_of_channels,price)
values ('p3','telugu basic',10,95.58);

insert into special_packs (pack_id,pack_name,number_of_channels,price)
values ('p4','hindi basic',7,57.06);

insert into special_packs (pack_id,pack_name,number_of_channels,price)
values ('p5','tamil smart pack',7,44.84);

create table categories_list 
(
category_id varchar2(10),
category varchar2(100) not null,
language varchar2(50) not null,
number_of_channels number (10) not null,
price decimal (10,2) not null,
constraint category_id_pk primary key (category_id),
constraint language1_ck check (language in ('tamil','telugu','english','hindi'))
)

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('1ta','entertainment','tamil',2,42.48);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('1te','entertainment','telugu',2,28.32);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('1en','entertainment','english',2,15.34);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('2ta','movies','tamil',2,24.78);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('2te','movies','telugu',2,31.86);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('2en','movies','english',2,25.96);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('2hi','movies','hindi',2,27.14);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('3ta','sports','tamil',1,20.06);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('3te','sports','telugu',1,22.42);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('3en','sports','english',1,22.42);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('3hi','sports','hindi',1,22.42);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('4en','knowledge','english',2,5.90);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('4ta','knowledge','tamil',2,8.26);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('5ta','news','tamil',2,2.36);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('5te','news','telugu',2,2.36);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('5hi','news','hindi',2,1.30);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('5en','news','english',2,4.72);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('6en','kids','english',1,11.80);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('6hi','kids','hindi',1,5.02);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('6ta','kids','tamil',1,7.08);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('6te','kids','telugu',1,4.72);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('7en','music','english',2,4.72);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('7hi','music','hindi',1,1.18);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('7te','music','telugu',2,5.90);

insert into categories_list (category_id,category,language,number_of_channels,price)
values ('7ta','music','tamil',1,7.08);

select * from categories_list;

create table user_list
(
user_id number,
user_name varchar2(50) not null,
email_id varchar2(60) not null,
phone_number number (10) not null,
constraint user_id_pk primary key (user_id),
constraint user_info_uq unique (user_id,email_id,phone_number)
);

insert into user_list (user_id,user_name,email_id,phone_number) values (&user_id,'&user_name','&email_id',&phone_number);
--or--
insert into user_list (user_id,user_name,email_id,phone_number) values (101,'suresh','suresh@gmail.com',9887766543);

insert into user_list (user_id,user_name,email_id,phone_number) values (102,'john','john@gmail.com',9876434523);

insert into user_list (user_id,user_name,email_id,phone_number) values (103,'jeni','jeni@gmail.com',9976542354);

desc user_list;
select * from user_list;

create table channel_categories_list
(
channel_id number (10) not null,
channel_name varchar2(100) not null,
language varchar2(25) not null,
price_amount decimal(6,2) not null,
category_id varchar2(10) not null,
special_pack_id varchar2(10) not null,
constraint channel2_id_pk primary key (channel_id),
constraint channel2_name_uq unique (channel_name),
constraint language2_ck check (language in ('tamil','telugu','english','hindi'))
constraint category_id_fk foreign key (category_id) references categories_list (category_id),
constraint special_pack_fk foreign key (special_pack_id) references special_packs (sepcial_pack_id)
);

insert into channel_categories_list (channel_id,channel_name,category_type,language,price_amount)
values (&channel_id,'&channel_name','&category_type','&language',&price_amount);

desc channel_categories_list;
select * from channel_categories_list;

create table user_subscribed_list
(
selection_id number(5),
user_id number(5)not null,
category_id varchar2(10) not null,
special_pack_id varchar2(10) not null,
number_of_channels number (5) not null,
price_amount decimal(8,2) not null,
active_date date default sysdate,
deactive_date date,
payment_status char(15) default 'Completed',    
constraint selection1_id_pk primary key (selection_id),      
constraint user1_id_fk foreign key (user_id) references user_list (user_id),
constraint payment1_status_ck check (payment_status in ('Completed')),
constraint category1_id_fk foreign key (category_id) references categories_list (category_id),
constraint special1_pack_fk foreign key (special_pack_id) references special_packs (pack_id)
);

create sequence selection_process_seq start with 1 increment by 1;

insert into user_subscribed_list (selection_id,user_id,category_id,special_pack_id,number_of_channels,price_amount,deactive_date) 
values (selection_process_seq.nextval,101,'6en','p2',12,123.90,(sysdate+29));

insert into user_subscribed_list (selection_id,user_id,category_id,special_pack_id,number_of_channels,price_amount,deactive_date) 
values (selection_process_seq.nextval,102,'5hi','p5',14,92.16,(sysdate+29));

insert into user_subscribed_list (selection_id,user_id,category_id,special_pack_id,number_of_channels,price_amount,deactive_date) 
values (selection_process_seq.nextval,103,'5en','p2p3',23,212.40,(sysdate+29));

desc user_subscribed_list;
select * from user_subscribed_list;
